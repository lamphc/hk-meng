{"version":3,"sources":["../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/HouseItem/index.js","components/HouseItem/index.module.css","utils/api/house.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","pages/Map/index.module.css","pages/Map/index.js"],"names":["require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent","restProps","createElement","role","onClick","Component","defaultProps","module","_defineProperty","enumerable","configurable","writable","HouseItem","src","title","desc","tags","price","style","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","priceNum","getHouseFilters","id","axios","get","getHouseByFilters","cityId","params","start","end","getHouseDetail","getHouseFav","addFav","post","delFav","delete","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","Map","state","list","isShowList","getTypeAndZoom","type","nextLevel","currZoom","getZoom","createOverlays","item","coord","longitude","latitude","areaName","label","count","ipoint","BMap","Point","createRect","createCircle","opts","position","offset","Size","Label","setContent","rect","housename","housenum","arrow","setStyle","border","addEventListener","console","log","moveToArea","handlerHouseList","addOverlay","changedTouches","clientX","clientY","window","innerWidth","innerHeight","x","y","panBy","a","async","status","data","setState","bubble","bubbleName","centerAndZoom","renderOverlays","setTimeout","clearOverlays","getMapHouses","initMap","getCurrCity","Geocoder","getPoint","point","initPoint","addControl","NavigationControl","ScaleControl","resetMap","renderHouseList","houseList","show","titleWrap","listTitle","titleMore","href","houseItems","history","houseCode","BASE_URL","houseImg","goBack"],"mappings":"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","file":"static/js/11.1817013e.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  src: PropTypes.string,\r\n  title: PropTypes.string,\r\n  desc: PropTypes.string,\r\n  tags: PropTypes.array.isRequired,\r\n  price: PropTypes.number,\r\n  onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__29lYP\",\"imgWrap\":\"HouseItem_imgWrap__3ZPoa\",\"img\":\"HouseItem_img__1BaJK\",\"content\":\"HouseItem_content__1gVhj\",\"title\":\"HouseItem_title__2dXar\",\"desc\":\"HouseItem_desc__5-mp4\",\"price\":\"HouseItem_price__1_r8v\",\"priceNum\":\"HouseItem_priceNum__RGpsE\",\"tag\":\"HouseItem_tag__3MxYv\",\"tag1\":\"HouseItem_tag1__3VDnD\",\"tag2\":\"HouseItem_tag2__2IcZc\",\"tag3\":\"HouseItem_tag3__2L6o6\"};","/**\n * 找房\n */\nimport axios from '../axios';\n\n// 获取当前城市信息\nexport const getHouseFilters = (id = 'AREA|88cff55c-aaa4-e2e0') => {\n  return axios.get(`/houses/condition?id=${id}`)\n}\n\n// 根据筛选条件获取房屋列表\nexport const getHouseByFilters = (cityId, params, start, end) => {\n  return axios.get(`/houses`, {\n    params: {\n      cityId,\n      ...params,\n      start,\n      end\n    }\n  })\n}\n\n// 获取房屋详情\nexport const getHouseDetail = (id) => {\n  return axios.get(`/houses/${id}`)\n}\n\n// 获取房屋是否收藏过\nexport const getHouseFav = (id) => {\n  return axios.get(`/user/favorites/${id}`)\n}\n\n// 添加收藏\nexport const addFav = (id) => {\n  return axios.post(`/user/favorites/${id}`)\n}\n\n// 删除收藏\nexport const delFav = (id) => {\n  return axios.delete(`/user/favorites/${id}`)\n}\n","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"Map_map__Uz0M9\",\"p\":\"Map_p__naNrb\",\"bubble\":\"Map_bubble__3_jsr\",\"bubbleName\":\"Map_bubbleName__1yPLO\",\"rect\":\"Map_rect__9DstZ\",\"arrow\":\"Map_arrow__Rl8cI\",\"housename\":\"Map_housename__3_AM2\",\"housenum\":\"Map_housenum__Trqvz\",\"houseList\":\"Map_houseList__3_QXT\",\"show\":\"Map_show__2ZuGm\",\"titleWrap\":\"Map_titleWrap__1rQyi\",\"listTitle\":\"Map_listTitle__BxeKe\",\"titleMore\":\"Map_titleMore__1F-hE\",\"houseItems\":\"Map_houseItems__2DX0Y\"};","import React, { Component } from 'react';\nimport { NavBar, Icon } from 'antd-mobile';\n\nimport styles from './index.module.css'\nimport { getCurrCity } from '../../utils';\nimport { getMapHouses } from '../../utils/api/city';\nimport { getHouseByFilters } from '../../utils/api/house';\nimport HouseItem from '../../components/HouseItem';\nimport { BASE_URL } from '../../utils/axios';\n\nclass Map extends Component {\n\n  state = {\n    list: [],\n    isShowList: false\n  }\n\n  componentDidMount() {\n    this.initMap()\n  }\n\n  // 提供地图缩放级别和覆盖物类型\n  getTypeAndZoom = () => {\n    let type, nextLevel\n    // 获取小区缩放级别\n\n    const currZoom = this.map.getZoom() // 项目中默认缩放级别为：11\n    if (currZoom >= 10 && currZoom < 12) {\n      // 区\n      type = 'circle'\n      nextLevel = 13\n    } else if (currZoom >= 12 && currZoom < 14) {\n      // 镇\n      type = 'circle'\n      nextLevel = 15\n    } else if (currZoom >= 14 && currZoom < 16) {\n      // 小区\n      type = 'rect'\n    }\n    return {\n      type,\n      nextLevel\n    }\n  }\n\n\n  // 创建覆盖物\n  createOverlays = (type, item, nextLevel) => {\n    const {\n      coord: { longitude, latitude },\n      label: areaName,\n      count,\n      value\n    } = item;\n    // 转换地理位置坐标\n    const ipoint = new this.BMap.Point(longitude, latitude);\n    if (type === 'rect') {\n      this.createRect(ipoint, areaName, count, value)\n    } else {\n      this.createCircle(ipoint, areaName, count, value, nextLevel)\n    }\n  }\n\n  // 处理小区情况\n  createRect = (ipoint, areaName, count, value) => {\n    // 绘制覆盖物\n    const opts = {\n      position: ipoint,    // 指定文本标注所在的地理位置\n      offset: new this.BMap.Size(-50, -28)    //设置文本偏移量\n    }\n    const label = new this.BMap.Label(null, opts);  // 创建文本标注对象\n    label.setContent(`\n      <div class=\"${styles.rect}\">\n        <span class=\"${styles.housename}\">${areaName}</span>\n        <span class=\"${styles.housenum}\">${count}</span>\n        <i class=\"${styles.arrow}\"></i>\n      </div>\n     `\n    )\n    // 去除默认样式\n    label.setStyle({\n      border: 'none'\n    });\n    // 添加点击事件\n    label.addEventListener('click', (e) => {\n      console.log('点击小区', value);\n      // this.map.centerAndZoom(ipoint, 15)\n      // this.map.panTo(ipoint)\n      console.log(e);\n      this.moveToArea(e);\n      this.handlerHouseList(value)\n    })\n    this.map.addOverlay(label);\n  }\n\n  // 移动地图到当前小区位置\n  moveToArea = (e) => {\n    let { clientX, clientY } = e.changedTouches[0];\n    console.log(window.innerWidth / 2, (window.innerHeight - 330) / 2, clientX, clientY)\n    const x = window.innerWidth / 2 - clientX, y = (window.innerHeight - 330) / 2 - clientY;\n    console.log(x, y)\n    this.map.panBy(x, y)\n  }\n\n  // 获取小区下的房源列表\n  // 调用之前定义的根据过滤条件获取房源列表方法，传入cityId\n  handlerHouseList = async (value) => {\n    const { status, data: { list } } = await getHouseByFilters(value);\n    status === 200 && this.setState({\n      list,\n      isShowList: true\n    })\n  }\n\n  // 处理区和镇的情况\n  createCircle = (ipoint, areaName, count, value, nextLevel) => {\n    // 绘制覆盖物\n    const opts = {\n      position: ipoint,    // 指定文本标注所在的地理位置\n      offset: new this.BMap.Size(0, 0)    //设置文本偏移量\n    }\n    const label = new this.BMap.Label(null, opts);  // 创建文本标注对象\n    // 给label添加唯一ID\n    // label.id = value;\n    label.setContent(\n      `\n              <div class=\"${styles.bubble}\">\n              <p class=\"${styles.bubbleName}\">${areaName}</p>\n              <p>${count}</p>\n              </div>\n              `\n    )\n    // 去除默认样式\n    label.setStyle({\n      border: 'none'\n    });\n    // 添加点击事件\n    label.addEventListener('click', () => {\n      // 设置显示下一区域的位置和缩放级别\n      this.map.centerAndZoom(ipoint, nextLevel);\n      this.renderOverlays(value);\n      // 清除第一层覆盖物\n      // map.clearOverlays();\n      setTimeout(() => this.map.clearOverlays());\n    })\n    this.map.addOverlay(label);\n  }\n\n\n  // 根据区域渲染覆盖物\n  renderOverlays = async (id) => {\n    // Toast.loading('加载中...', 0);\n    // 初始化区覆盖物\n    let { status, data } = await getMapHouses(id);\n    // Toast.hide();\n    // =========获取覆盖物类型和下一层缩放级别========\n    const { type, nextLevel } = this.getTypeAndZoom();\n    if (status === 200) {\n      data.forEach((item) => {\n        this.createOverlays(type, item, nextLevel)\n      })\n    }\n  }\n\n  // 初始化地图\n  initMap = async () => {\n    // 挂载到实例上\n    this.BMap = window.BMap;\n    // 创建地图实例 \n    this.map = new this.BMap.Map(\"container\");\n    // 获取定位城市\n    const { value, label } = await getCurrCity();\n    // 处理重置\n    this.cityId = value;\n    // 创建地址解析器实例     \n    let myGeo = new this.BMap.Geocoder();\n    // 将地址解析结果显示在地图上，并调整地图视野    \n    myGeo.getPoint(null, async (point) => {\n      if (point) {\n        // 初始化地图，设置中心点坐标和地图级别\n        this.initPoint = point;\n        this.map.centerAndZoom(point, 11);\n        // 添加控件\n        this.map.addControl(new this.BMap.NavigationControl());\n        this.map.addControl(new this.BMap.ScaleControl());\n        // map.addOverlay(new BMap.Marker(point));\n        this.renderOverlays(value)\n      }\n    },\n      label);\n    this.map.addEventListener('movestart', () => {\n      if (this.state.isShowList) {\n        this.setState({\n          isShowList: false\n        })\n      }\n    })\n  }\n\n  // 处理地图找房重置功能\n  resetMap = () => {\n    if (this.map.getZoom() === 11) return;\n    // 重置为当前城市坐标和缩放级别\n    this.map.centerAndZoom(this.initPoint, 11);\n    // 渲染城市下区的=》覆盖物\n    this.renderOverlays(this.cityId)\n    // 删除当前覆盖物\n    setTimeout(() => this.map.clearOverlays());\n  }\n\n  // 渲染小区下房屋列表\n  renderHouseList = () => {\n    return (\n      <div\n        className={[\n          styles.houseList,\n          this.state.isShowList ? styles.show : ''\n        ].join(' ')}\n      >\n        <div className={styles.titleWrap}>\n          <h1 className={styles.listTitle}>房屋列表</h1>\n          <a className={styles.titleMore} href=\"/home/house\">\n            更多房源\n    </a>\n        </div>\n\n        <div className={styles.houseItems}>\n          {/* 房屋结构 */}\n          {\n            this.state.list.map(item => (\n              <HouseItem\n                onClick={() => this.props.history.push(`/detail/${item.houseCode}`)}\n                key={item.houseCode}\n                src={BASE_URL + item.houseImg}\n                title={item.title}\n                desc={item.desc}\n                tags={item.tags}\n                price={item.price}\n              />\n            ))\n          }\n        </div>\n      </div>\n    )\n  }\n  render() {\n    return (\n      <div className={styles.map}>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" />}\n          onLeftClick={() => {\n            this.props.history.goBack()\n          }}\n        >\n          地图\n</NavBar>\n        <div id=\"container\"></div>\n        {/* 房源列表 */}\n        {\n          this.renderHouseList()\n        }\n        {/* 重置按钮 */}\n        <div onClick={this.resetMap} id='reset'><i className=\"iconfont icon-cls\"></i></div>\n      </div>\n    );\n  }\n}\n\nexport default Map;"],"sourceRoot":""}